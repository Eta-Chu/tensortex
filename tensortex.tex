%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% kettensor
\newcommand{\kettensor}[3][]{%
\node[rectangle,node distance=0.8cm,draw=black!500,thick,minimum width=7mm, minimum height=7mm, inner sep=0pt,outer sep=0pt,#1] (#2) {#3};
  \draw[thick] (#2) -- ++(0, -0.8) coordinate (#2_below); % 下
  \draw[thick] (#2) -- ++(0.8, 0) coordinate (#2_right); % 右
  \draw[thick] (#2) -- ++(-0.8, 0) coordinate (#2_left); % 左
}

%bratensor
\newcommand{\bratensor}[3][]{%
\node[rectangle,node distance=0.8cm,draw=black!500,thick,minimum width=7mm, minimum height=7mm, inner sep=0pt,outer sep=0pt,#1] (#2) {#3};
% 默认绘制自由腿（可选）单位cm
\draw[thick] (#2) -- ++(0, 0.8) coordinate (#2_above); % 上
\draw[thick] (#2) -- ++(0.8, 0) coordinate (#2_right); % 右
\draw[thick] (#2) -- ++(-0.8, 0) coordinate (#2_left); % 左
}

%innertensor
\newcommand{\innertensor}[3][]{%
  \node[circle,node distance=0.8cm,draw=black!500,thick,minimum width=7mm, minimum height=7mm, inner sep=0pt,outer sep=0pt,#1 % 额外样式
  ] (#2) {#3};
  \draw[thick] (#2) -- ++(0.8, 0) coordinate (#2_right); % 右
  \draw[thick] (#2) -- ++(-0.8, 0) coordinate (#2_left); % 左
}
%texttensor
\newcommand{\texttensor}[3][]{%
  \node[rectangle,node distance=0.8cm,draw=none, fill=none, text centered,thick,minimum size=0mm,inner sep=-5pt,#1 % 额外样式
  ] (#2) {#3};
}

%sandwich
%% 1.9cm
\newcommand{\sandwich}[7][]{
\node[rectangle, node distance=0.8cm, draw=black!500,thick,minimum width=7mm, minimum height=7mm, inner sep=0pt,outer sep=0pt,#1] (#2) {#3};
\node[circle,node distance=0.6cm,draw=black!500,thick,minimum width=7mm, minimum height=7mm, inner sep=0pt,outer sep=0pt, below=of #2] (#4) {#5};
\node[rectangle, node distance=0.6cm, draw=black!500,thick,minimum width=7mm, minimum height=7mm, inner sep=0pt,outer sep=0pt, below=of #4] (#6) {#7};

\draw[thick](#2) -- ++(-0.8, 0) coordinate (#2_left);
\draw[thick](#2) -- ++(0.8, 0) coordinate (#2_right);
\draw[thick](#6) -- ++(-0.8, 0) coordinate (#6_left);
\draw[thick](#6) -- ++(0.8, 0) coordinate (#6_right);
\draw[thick](#4) to[out=90, in=270] (#2);
\draw[thick](#6) to[out=90, in=270] (#4);
}

%ketbra 
%% 1.9cm
\newcommand{\ketbra}[5][]{
\node[rectangle, node distance=0.8cm, draw=black!500,thick,minimum width=7mm, minimum height=7mm, inner sep=0pt,outer sep=0pt,#1] (#2) {#3};
\node[rectangle, node distance=1.9cm, draw=black!500,thick,minimum width=7mm, minimum height=7mm, inner sep=0pt,outer sep=0pt,below=of #2] (#4) {#5};

\draw[thick](#2) -- ++(-0.8, 0) coordinate (#2_left);
\draw[thick](#2) -- ++(0.8, 0) coordinate (#2_right);
\draw[thick](#4) -- ++(-0.8, 0) coordinate (#4_left);
\draw[thick](#4) -- ++(0.8, 0) coordinate (#4_right);
\draw[thick](#4) to[out=90, in=270] (#2);
}

%ltensor
\newcommand{\ltensor}[3]{
\node[circle, node distance=0.8cm,draw=black!500,thick,minimum width=7mm, minimum height=7mm, inner sep=0pt,
outer sep=0pt] (LLL) at ([xshift=-1.5cm, yshift=-1.3cm] #1) {#3};
    \draw[line width=0.7pt](LLL) to[out=90,   in=180] (#1_left);
    \draw[line width=0.7pt](LLL) to[out=270, in=180] (#2_left);
}

\newcommand{\singleltensor}[3][]{
\node[circle, node distance=0.8cm,draw=black!500,thick,minimum width=7mm, minimum height=7mm, inner sep=0pt, outer sep=0pt, #1] (#2) {#3};
\draw[line width=0.7pt](#2) to[out=90,   in=180] ++(0.7cm, 1.3cm);
\draw[line width=0.7pt](#2) to[out=270, in=180] ++(0.7cm, -1.3cm);
}

%rtensor
% x-axis 1.5cm
% y-axis 1.3cm
\newcommand{\rtensor}[3]{
\node[circle, node distance=0.8cm,draw=black!500,thick,minimum width=7mm, minimum height=7mm, inner sep=0pt,
outer sep=0pt] (LLL) at ([xshift=1.5cm, yshift=-1.3cm] #1) {#3};
    \draw[line width=0.7pt](LLL) to[out=90,   in=0] (#1_right);
    \draw[line width=0.7pt](LLL) to[out=270, in=0] (#2_right);
}

\newcommand{\singlertensor}[3][]{
\node[circle, node distance=0.8cm,draw=black!500,thick,minimum width=7mm, minimum height=7mm, inner sep=0pt, outer sep=0pt, #1] (#2) {#3};
\draw[line width=0.7pt](#2) to[out=90,   in=0] ++(-0.7cm, 1.3cm);
\draw[line width=0.7pt](#2) to[out=270, in=0] ++(-0.7cm, -1.3cm);
}

%tltensor
% below right=0.7cm and 0.9cm of A
\newcommand{\rltensor}[5][]{
\node[circle, node distance=0.8cm,draw=black!500,thick,minimum width=7mm, minimum height=7mm, inner sep=0pt,outer sep=0pt, #1] (#2){#3};
\node[circle, node distance=0.1cm,draw=black!500,thick,minimum width=7mm, minimum height=7mm, inner sep=0pt,outer sep=0pt, right=of #2] (#4){#5};

\draw[line width=0.7pt](#2) to[out=90,   in=0] ++(-0.7cm, 1.3cm) coordinate (#1_above);
\draw[line width=0.7pt](#2) to[out=270,   in=0] ++(-0.7cm, -1.3cm) coordinate (#1_below);
\draw[line width=0.7pt](#4) to[out=90,   in=180] ++(0.7cm, 1.3cm) coordinate (#3_above);
\draw[line width=0.7pt](#4) to[out=270,   in=180] ++(0.7cm, -1.3cm) coordinate (#3_below);
}

%boxtensor
%below right=-0.7cm and 0.9cm of A
\newcommand{\boxtensor}[3][]{
\node[rectangle, node distance=0.8cm, draw=black!500,thick,minimum width=7mm, minimum height=33mm, inner sep=0pt,outer sep=0pt,#1] (#2) {#3};
\draw[thick] ($(#2.east) + (0, 1.3)$) -- ++(0.45, 0) coordinate (#2_rightabove); % 右上
\draw[thick] ($(#2.east) + (0, -1.3)$) -- ++(0.45, 0) coordinate (#2_rightbelow); % 右下
\draw[thick] ($(#2.west) + (0, 1.3)$)  -- ++(-0.45, 0) coordinate (#2_leftabove); % 左上
\draw[thick] ($(#2.west) + (0, -1.3)$)  -- ++(-0.45, 0) coordinate (#2_leftbelow); % 左下
}

\newcommand{\doublesandwich}[9][]{
\node[rectangle,node distance=0.8cm,draw=black!500,thick,minimum width=7mm, minimum height=7mm, inner sep=0pt,outer sep=0pt,#1] (#2) {#3};
\node[circle,node distance=0.4cm,draw=black!500,thick,minimum width=7mm, minimum height=7mm, inner sep=0pt,outer sep=0pt, below=of #2] (#4) {#5};
\node[circle,node distance=0.4cm,draw=black!500,thick,minimum width=7mm, minimum height=7mm, inner sep=0pt,outer sep=0pt, below=of #4] (#6) {#7};
\node[rectangle,node distance=0.4cm,draw=black!500,thick,minimum width=7mm, minimum height=7mm, inner sep=0pt,outer sep=0pt,below=of #6] (#8) {#9};
\node[circle,draw=black!500,thick,minimum width=7mm, minimum height=7mm, inner sep=0pt,outer sep=0pt,below right=1cm and 1cm of #2] (r){$r$};
\node[circle,draw=black!500,thick,minimum width=7mm, minimum height=7mm, inner sep=0pt,outer sep=0pt, below left=1cm and 1cm of #2] (l){$\ell$};

\draw[line width=0.7pt](#2) to[out=270,   in=90] (#4);
\draw[line width=0.7pt](#4) to[out=270,   in=90] (#6);
\draw[line width=0.7pt](#6) to[out=270,   in=90] (#8);
\draw[line width=0.7pt](l) to[out=90,   in=180] (#2);
\draw[line width=0.7pt](l) to[out=270,   in=180] (#8);
\draw[line width=0.7pt](r) to[out=90,   in=0] (#2);
\draw[line width=0.7pt](r) to[out=270,   in=0] (#8);
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%